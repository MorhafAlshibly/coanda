syntax = "proto3";

import "google/protobuf/timestamp.proto";

option go_package = ".;api";

package api;

service ItemService {
    rpc CreateItem(CreateItemRequest) returns (CreateItemResponse);
    rpc GetItem(GetItemRequest) returns (GetItemResponse);
    rpc GetItems(GetItemsRequest) returns (GetItemsResponse);
}

message CreateItemRequest {
    string type = 1;
    map<string, string> data = 2;
    google.protobuf.Timestamp expire = 3;
}

message CreateItemResponse {
    bool success = 1;
    Item item = 2;
}

message GetItemRequest {
    string id = 1;
    string type = 2;
}

message GetItemResponse {
    bool success = 1;
    Item item = 2;
    enum Error {
        NONE = 0;
        NOT_FOUND = 1;
    };
    Error error = 3;
}

message GetItemsRequest {
    optional string type = 1;
    optional uint64 max = 2;
    optional uint64 page = 3;
}

message GetItemsResponse {
    bool success = 1;
    repeated Item items = 2;
}

message Item {
    string id = 1;
    string type = 2;
    map<string, string> data = 3;
    google.protobuf.Timestamp expire = 4;
}